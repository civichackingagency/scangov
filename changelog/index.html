<!doctype html>
<html lang="en">

  <head>
    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    
    
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta property="og:locale" content="en_US">
    <link rel="canonical" href="https://scangov.org/changelog/">
    <!-- Title -->
    <title>Changelog - ScanGov</title>
    <!-- Open Graph -->
    <meta property="og:site_name" content="ScanGov">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Changelog">
    <meta property="og:description" content="Updates to our data and website.">
    <meta property="og:url" content="https://scangov.org/changelog/">
    
      <!-- Created date -->
      <meta property="article:published_time" content="Mon Feb 10 2025 17:19:46 GMT+0000 (Coordinated Universal Time)">
      <meta name="dc.date" content="Mon Feb 10 2025 17:19:46 GMT+0000 (Coordinated Universal Time)">
      <meta name="dc.date.created" content="Mon Feb 10 2025 17:19:46 GMT+0000 (Coordinated Universal Time)">
      <meta name="dcterms.created" content="Mon Feb 10 2025 17:19:46 GMT+0000 (Coordinated Universal Time)">
    
    
    
    <!-- Meta site -->
    <meta property="linkedin:site" content="NaN">
    <!-- Twitter -->
    <meta name="twitter:site" content="@civichacking">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
    
      <meta property="twitter:image" content="https://scangov.org/assets/img/avatar-twitter.png">
    
    
      <meta property="og:image" content="https://scangov.org/assets/img/avatar-og.png">
    
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicon/manifest.json">
<meta content="#ffffff" name="msapplication-TileColor">
<meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png">
<meta content="#ffffff" name="theme-color">
    <!-- CSS -->
    <link rel="stylesheet" href="/bootstrap-purged.css">
<link href="/css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body class="" data-bs-theme="dark">
    <a class="sr-only sr-only-focusable skip-link" href="#main-content">
        Skip to main content
    </a>
<nav class="navbar navbar-expand-md border-bottom">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      <svg id="logo" class="d-inline-block align-middle" viewBox="0 0 1500 1500" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M474.266 408.965H1023.61C1054.76 408.965 1080.01 434.207 1080.01 465.345V1040.42C1080.01 1071.56 1054.76 1096.8 1023.61 1096.8H474.266C443.117 1096.8 417.865 1071.56 417.865 1040.42V465.345C417.865 434.207 443.117 408.965 474.266 408.965ZM474.266 442.793C461.806 442.793 451.706 452.89 451.706 465.345V1040.42C451.706 1052.88 461.806 1062.97 474.266 1062.97H1023.61C1036.07 1062.97 1046.17 1052.88 1046.17 1040.42V465.345C1046.17 452.89 1036.07 442.793 1023.61 442.793H474.266Z" fill=""></path>
        <path d="M636.699 440.538H1061.96V1075.38H636.699V440.538Z" fill=""></path>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M290.4 153H1208.6C1239.75 153 1265 178.242 1265 209.38V337.926C1265 369.064 1239.75 394.306 1208.6 394.306H290.4C259.251 394.306 234 369.064 234 337.926V209.38C234 178.242 259.251 153 290.4 153ZM290.4 186.828C277.941 186.828 267.84 196.925 267.84 209.38V337.926C267.84 350.381 277.941 360.478 290.4 360.478H1208.6C1221.06 360.478 1231.16 350.381 1231.16 337.926V209.38C1231.16 196.925 1221.06 186.828 1208.6 186.828H290.4Z" fill=""></path>
        <path d="M636.699 187.956C636.699 184.842 639.224 182.318 642.339 182.318H1225.52C1228.63 182.318 1231.16 184.842 1231.16 187.956V361.606C1231.16 364.72 1228.63 367.244 1225.52 367.244H642.339C639.224 367.244 636.699 364.72 636.699 361.606V187.956Z" fill=""></path>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M290.4 1104.69H1208.6C1239.75 1104.69 1265 1129.94 1265 1161.07V1289.62C1265 1320.76 1239.75 1346 1208.6 1346H290.4C259.251 1346 234 1320.76 234 1289.62V1161.07C234 1129.94 259.251 1104.69 290.4 1104.69ZM290.4 1138.52C277.941 1138.52 267.84 1148.62 267.84 1161.07V1289.62C267.84 1302.08 277.941 1312.17 290.4 1312.17H1208.6C1221.06 1312.17 1231.16 1302.08 1231.16 1289.62V1161.07C1231.16 1148.62 1221.06 1138.52 1208.6 1138.52H290.4Z" fill=""></path>
        <path d="M636.699 1139.65C636.699 1136.54 639.224 1134.01 642.339 1134.01H1225.52C1228.63 1134.01 1231.16 1136.54 1231.16 1139.65V1313.3C1231.16 1316.41 1228.63 1318.94 1225.52 1318.94H642.339C639.224 1318.94 636.699 1316.41 636.699 1313.3V1139.65Z" fill=""></path>
      </svg>
      ScanGov
    </a>
    <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler ml-auto collapsed" data-target="#navbarSupportedContent" data-toggle="collapse" type="button">
      <span class="navbar-toggler-icon"></span>
    </button>
    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
      <ul class="navbar-nav mb-2 mb-lg-0">
        
          
            <li class="nav-item me-3 me-lg-0">
              <a class="nav-item nav-link mx-1 " href="/">
                <svg><use href="#fas-fa-filter" xlink:href="#fas-fa-filter"></use></svg>
                Filter
              </a>
            </li>
          
        
          
            <li class="nav-item me-3 me-lg-0">
              <a class="nav-item nav-link mx-1 " href="/rankings/cities/">
                <svg><use href="#fas-fa-medal" xlink:href="#fas-fa-medal"></use></svg>
                Rankings
              </a>
            </li>
          
        
          
            <li class="nav-item me-3 me-lg-0">
              <a class="nav-item nav-link mx-1 " href="https://docs.scangov.org/community">
                <svg><use href="#fas-fa-circle-nodes" xlink:href="#fas-fa-circle-nodes"></use></svg>
                Community
              </a>
            </li>
          
        
          
            <li class="nav-item me-3 me-lg-0">
              <a class="nav-item nav-link mx-1 " href="https://docs.scangov.org/">
                <svg><use href="#fas-fa-file-lines" xlink:href="#fas-fa-file-lines"></use></svg>
                Docs
              </a>
            </li>
          
        
          
            <li class="nav-item me-3 me-lg-0">
              <a class="nav-item nav-link mx-1 " href="https://docs.scangov.org/about">
                <svg><use href="#fas-fa-circle-info" xlink:href="#fas-fa-circle-info"></use></svg>
                About
              </a>
            </li>
          
        
        <li class="nav-item me-3 me-lg-0" id="toggle-theme">
          <a class="nav-item nav-link mx-1" href="javascript:void(0)" onclick="
            localStorage.setItem('theme', document.body.getAttribute('data-bs-theme') == 'light' ? 'dark' : 'light');
            document.body.setAttribute('data-bs-theme', document.body.getAttribute('data-bs-theme') == 'light' ? 'dark' : 'light');
            document.querySelector('#toggle-theme img').src = '/assets/img/' + (document.body.getAttribute('data-bs-theme') == 'light' ? 'moon' : 'sun') + '.svg';
            ">
            <img id="theme-icon" src="/assets/img/sun.svg" alt="Toggle theme" style="width: 1rem;">
            <script>
              let colorTheme = localStorage.getItem('theme');
              if (colorTheme) {
                document.body.setAttribute('data-bs-theme', colorTheme);
                document.querySelector('#toggle-theme img').src = '/assets/img/' + (colorTheme == 'light' ? 'moon' : 'sun') + '.svg';
              }
            </script>
          </a>
      </li></ul>
    </div>
  </div>
</nav>

<main>
  <div class="container">
    <div class="row">
      <div class="col-12 col-sm-12 col-md-9 col-lg-9 col-xl-9">
        <div class="post">
          
<div class="col-12">
  <section class="py-4">
    <ul class="timeline" id="timeline"></ul>
  </section>
</div>
<script src="/scripts/util.js"></script>
<script>
  fetch('/data/metadata.json').then(res => res.json()).then(data => {
    let changes = new Map();
    for (let i = 0; i < data.length; i++) {
      if (data[i].status != 200 || !data[i].redirect.includes(data[i].url))
        continue;

      for (let j = 0; j < data[i].history.length; j++) {
        const newData = (j == data[i].history.length - 1 ?
          data[i] :
          data[i].history[j + 1]), oldData = data[i].history[j];
        if (newData.status != 200)
          continue;

        let oldTotal = 0, newTotal = 0;
        for (let k = 0; k < variables.length; k++) {
          if (oldData[variables[k]])
            oldTotal++;
          if (newData[variables[k]])
            newTotal++;
        }
        if (oldTotal == newTotal)
          continue;

        let date = new Date(oldData.time);
        date = (date.getMonth() + 1) + '/' + date.getDate() + '/' + date.getFullYear();
        const item = {
          url: data[i].url,
          old: oldTotal,
          new: newTotal
        };
        if (changes.has(date))
          changes.set(date, changes.get(date).concat(item));
        else
          changes.set(date, [item]);
      }
    }
    for (const entry of changes.entries())
      changes.set(entry[0], entry[1].sort((a, b) => (b.new - b.old) - (a.new - a.old)))
    const timeline = document.getElementById('timeline');
    changes = [...changes.entries()].sort((a, b) => new Date(b[0]) - new Date(a[0]));
    for (const change of changes) {
      const li = document.createElement('li');
      li.classList.add('timeline-item');
      li.innerHTML = `
                <h5 class="fw-bold">${change[0]}</h5>
                <div class="text-muted">
                ${change[1].map(domain => {
        const oldGrade = Math.round(domain.old / variables.length * 100);
        const newGrade = Math.round(domain.new / variables.length * 100);
        return `
                        <p style="margin-bottom: 0.25rem;">
                            ${domain.url} / Grade: ${getGrade(oldGrade)} → ${getGrade(newGrade)} / Score: ${oldGrade}% → ${newGrade}% (${domain.old} → ${domain.new} of ${variables.length} tags)
                            <a href="/profile/?domain=${domain.url}" aria-label="View report"><svg class="svg-inline--fa fa-file-lines" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="file-lines" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM112 256H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg></a>
                        </p>`;
      }).join('')}
            </div>
            ${change !== changes[changes.length - 1] ? '<br>' : ''}
            </li>
        `;
      timeline.appendChild(li);
    }
  });
</script>
<script src="/scripts/variables.js"></script>
</div></div></div></div></main></body>

</html>
        
      
      <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3"></div>
    
  

<div class="container-fluid">
  <footer class="pt-5 border-top">
    <div class="row">
      <div class="col-4 mb-3">
        <ul class="nav flex-column">
          <li>
            <a href="https://docs.scangov.org/about/" class="nav-link p-0 text-body-secondary">About</a>
          </li>
          <li>
            <a href="https://docs.scangov.org/blog/" class="nav-link p-0 text-body-secondary">Blog</a>
          </li>
          <li>
            <a href="https://docs.scangov.org/press/" class="nav-link p-0 text-body-secondary">Press</a>
          </li>
        </ul>
      </div>
      <div class="col-4 mb-3">
        <ul class="nav flex-column">
          <li>
            <a href="https://docs.scangov.org" class="nav-link p-0 text-body-secondary">Docs</a>
          </li>
          <li>
            <a href="https://docs.scangov.org/help" class="nav-link p-0 text-body-secondary">Help</a>
          </li>
          <li>
            <a href="https://docs.scangov.org/community" class="nav-link p-0 text-body-secondary">Community</a>
          </li>
        </ul>
      </div>
      <div class="col-4 mb-3">
        <ul class="nav flex-column">
          <li>
            <a href="https://github.com/ScanGov/scangov/issues/new/choose" class="nav-link p-0 text-body-secondary">Issues</a>
          </li>
          <li>
            <a href="https://github.com/orgs/civichackingagency/projects/2" class="nav-link p-0 text-body-secondary">Project board</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
      <p class="small">ScanGov
        by
        <a href="NaN">Civic Hacking Agency</a>
      </p>
      <ul class="list-unstyled d-flex">
        
          <li class="ms-3">
            <a href="https://github.com/ScanGov/scangov">
              <span class="sr-only">GitHub</span>
              <svg class="sizeicon-xl" aria-hidden="true"><use href="#fab-fa-github" xlink:href="#fab-fa-github"></use></svg>
            </a>
          </li>
        
        
          <li class="ms-3">
            <a href="https://docs.scangov.org/feed.xml">
              <span class="sr-only">RSS</span>
              <svg class="sizeicon-xl" aria-hidden="true"><use href="#fas-fa-rss" xlink:href="#fas-fa-rss"></use></svg>
            </a>
          </li>
        
      </ul>
    </div>
  </footer>
</div>


<script async="" defer="" src="/assets/bootstrap/js/bootstrap.bundle.min.js"></script>

<script>
  let theme = localStorage.getItem('theme');
  if (!theme)
    theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? 'dark' : 'light';
  document.body.setAttribute('data-bs-theme', theme);
  if (theme === 'light')
    document.getElementById('theme-toggle-icon').outerHTML = `<i class='fa-solid fa-moon' id='theme-toggle-icon'></i>`;


  /* mobile menu */
  document.querySelectorAll('.navbar-toggler')[0].addEventListener('click',function(e) { document.getElementById('navbarSupportedContent').classList.toggle('show'); })

  /* autocomplete search */
  // Awesomplete - Lea Verou - MIT license
  !function(){function t(t){var e=Array.isArray(t)?{label:t[0],value:t[1]}:"object"==typeof t&&"label"in t&&"value"in t?t:{label:t,value:t};this.label=e.label||e.value,this.value=e.value}function e(t,e,i){for(var s in e){var n=e[s],r=t.input.getAttribute("data-"+s.toLowerCase());"number"==typeof n?t[s]=parseInt(r):!1===n?t[s]=null!==r:n instanceof Function?t[s]=null:t[s]=r,t[s]||0===t[s]||(t[s]=s in i?i[s]:n)}}function i(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function s(t,e){return o.call((e||document).querySelectorAll(t))}function n(){s("input.awesomplete").forEach(function(t){new r(t)})}var r=function(t,s){var n=this;r.count=(r.count||0)+1,this.count=r.count,this.isOpened=!1,this.input=i(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=s=s||{},e(this,{minChars:2,maxItems:10,autoFirst:!1,data:r.DATA,filter:r.FILTER_CONTAINS,sort:!1!==s.sort&&r.SORT_BYLENGTH,container:r.CONTAINER,item:r.ITEM,replace:r.REPLACE,tabSelect:!1,listLabel:"Results List",statusNoResults:"No results found",statusXResults:"{0} results found",statusTypeXChar:"Type {0} or more characters for results"},s),this.index=-1,this.container=this.container(t),this.ul=i.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container,"aria-label":this.listLabel}),this.status=i.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:""}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(t){var e=t.keyCode;n.opened&&(13===e&&n.selected?(t.preventDefault(),n.select(void 0,void 0,t)):9===e&&n.selected&&n.tabSelect?(t.preventDefault(),n.select(void 0,void 0,t)):27===e?n.close({reason:"esc"}):38!==e&&40!==e||(t.preventDefault(),n[38===e?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(t){t.preventDefault()},click:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&0===t.button&&(t.preventDefault(),n.select(e,t.target,t))}}}},i.bind(this.input,this._events.input),i.bind(this.input.form,this._events.form),i.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||s.list||[],r.all.push(this)};r.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if((t=i(t))&&t.children){var e=[];o.apply(t.children).forEach(function(t){if(!t.disabled){var i=t.textContent.trim(),s=t.value||i,n=t.label||i;""!==s&&e.push({label:n,value:s})}}),this._list=e}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(t){this.opened&&(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),this.input.setAttribute("aria-activedescendant",""),i.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),i.fire(this.input,"awesomplete-open")},destroy:function(){if(i.unbind(this.input,this._events.input),i.unbind(this.input.form,this._events.form),!this.options.container){var t=this.container.parentNode;t.insertBefore(this.input,this.container),t.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-owns"),this.input.removeAttribute("role");var e=r.all.indexOf(this);-1!==e&&r.all.splice(e,1)},next:function(){var t=this.ul.children.length;this.goto(this.index<t-1?this.index+1:t?0:-1)},previous:function(){var t=this.ul.children.length,e=this.index-1;this.goto(this.selected&&-1!==e?e:t-1)},goto:function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=e[t].offsetTop-this.ul.clientHeight+e[t].clientHeight,i.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,e,s){if(t?this.index=i.siblingIndex(t):t=this.ul.children[this.index],t){var n=this.suggestions[this.index];i.fire(this.input,"awesomplete-select",{text:n,origin:e||t,originalEvent:s})&&(this.replace(n),this.close({reason:"select"}),i.fire(this.input,"awesomplete-selectcomplete",{text:n,originalEvent:s}))}},evaluate:function(){var e=this,i=this.input.value;i.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(s){return new t(e.data(s,i))}).filter(function(t){return e.filter(t,i)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(t,s){e.ul.appendChild(e.item(t,i,s))}),0===this.ul.children.length?(this.status.textContent=this.statusNoResults,this.close({reason:"nomatches"})):(this.input.setAttribute("aria-activedescendant",""),this.open(),this.status.textContent=this.statusXResults.replaceAll("{0}",this.ul.children.length))):(this.close({reason:"nomatches"}),this.minChar<=1||i.length>=this.minChars?this.status.textContent=this.statusNoResults:this.status.textContent=this.statusTypeXChar.replaceAll("{0}",this.minChars))}},r.all=[],r.FILTER_CONTAINS=function(t,e){return RegExp(i.regExpEscape(e.trim()),"i").test(t)},r.FILTER_STARTSWITH=function(t,e){return RegExp("^"+i.regExpEscape(e.trim()),"i").test(t)},r.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:t<e?-1:1},r.CONTAINER=function(t){return i.create("div",{className:"awesomplete",around:t})},r.ITEM=function(t,e,s){return i.create("li",{innerHTML:""===e.trim()?t:t.replace(RegExp(i.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>"),role:"option","aria-selected":"false",tabindex:"-1",id:"awesomplete_list_"+this.count+"_item_"+s})},r.REPLACE=function(t){this.input.value=t.value},r.DATA=function(t){return t},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var o=Array.prototype.slice;i.create=function(t,e){var s=document.createElement(t);for(var n in e){var r=e[n];if("inside"===n)i(r).appendChild(s);else if("around"===n){var o=i(r);o.parentNode.insertBefore(s,o),s.appendChild(o),null!=o.getAttribute("autofocus")&&o.focus()}else n in s?s[n]=r:s.setAttribute(n,r)}return s},i.bind=function(t,e){if(t)for(var i in e){var s=e[i];i.split(/\s+/).forEach(function(e){t.addEventListener(e,s)})}},i.unbind=function(t,e){if(t)for(var i in e){var s=e[i];i.split(/\s+/).forEach(function(e){t.removeEventListener(e,s)})}},i.fire=function(t,e,i){var s=document.createEvent("HTMLEvents");s.initEvent(e,!0,!0);for(var n in i)s[n]=i[n];return t.dispatchEvent(s)},i.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},i.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},"undefined"!=typeof self&&(self.Awesomplete=r),"undefined"!=typeof Document&&("loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)),r.$=i,r.$$=s,"object"==typeof module&&module.exports&&(module.exports=r)}();
  //# sourceMappingURL=awesomplete.min.js.map

  if(document.getElementById('search')) {
    const queryInput = document.getElementById('search');

    const awesomplete = new Awesomplete(queryInput, {
      filter: () => { // We will provide a list that is already filtered ...
        return true;
      },
      sort: false,    // ... and sorted.
      list: []
    });

    queryInput.addEventListener('awesomplete-selectcomplete',function(event) {
      window.location.href = event.text.value;
    })

    queryInput.addEventListener("input", async (event) => {

    const url = "https://ktnuy2jke9.execute-api.us-west-2.amazonaws.com/search?q="+event.target.value;
    try {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(`Response status: ${response.status}`);
      }

      const json = await response.json();
      console.log(json);
        const inputText = event.target.value;
        let outputList = [];
        json.forEach(j => {
          outputList.push({ "label": `<a href="/profile/${j.domain.replace(/\./g,'-')}/overview/">${j.domain}</a> by ${j.agency}`, "value": `/profile/${j.domain.replace(/\./g,'-')}/overview/` })
        })
        awesomplete.list = outputList;
        awesomplete.evaluate();
      } catch (error) {
        console.error(error.message);
      }

    });

  }
</script>

